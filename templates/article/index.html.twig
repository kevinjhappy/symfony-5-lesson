{% extends 'base.html.twig' %}

{% block title %}Article List{% endblock %}

{% block body %}
    {# lire et afficher un type de message flash #}
    {% for message in app.flashes('notice') %}
        <div class="flash-notice">
            {{ message }}
        </div>
    {% endfor %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Article list</h1>
    <a href="{{ path('article_create') }}">Créer un nouvel article</a>

    <ul>
    {% for article in articles %}
        <li>
            {{ article.title }}
            {% if article.user is not null %}de {{ article.user.firstName }} {% endif %}
            créé le {{ article.createdAt|date('d m Y') }}
            {% if is_granted("ROLE_ADMIN") %}
                <a href="{{ path('article_edit', {'id': article.id}) }}">Editer</a>
                <a href="{{ path('article_delete', {'id': article.id}) }}">Supprimer</a>
            {% endif %}
        </li>
    {% endfor %}
    </ul>
</div>
{% endblock %}
